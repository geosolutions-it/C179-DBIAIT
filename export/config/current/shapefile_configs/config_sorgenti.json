{
   "file_name": "sorgenti.shp",
   "skip": false,
   "folder": "Impianti",
   "sources":[
      {
         "fields":[
             {"name":"acq_captazione.geom", "alias": "geom"},
             {"name":"acq_captazione.geom", "alias": "x_proj", "function": "GB_X"},
             {"name":"acq_captazione.geom", "alias": "y_proj", "function": "GB_Y"},
             {"name":"acq_captazione.codice_ato","alias": "codice_ato"}
         ],
         "table":{
            "name":"acq_captazione"
         },
         "join":[
            {
               "type":"inner",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"inner",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "inner",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            }
         ],
         "filter": "WHERE acq_captazione.d_gestore = 'PUBLIACQUA' AND acq_captazione.d_ambito IN ('AT3', NULL) AND acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND acq_captazione.sub_funzione = 4"
      },
      {
         "fields":[
             {"name":"a_acq_captazione.geom", "alias": "geom"},
             {"name":"a_acq_captazione.geom", "alias": "x_proj", "function": "GB_X"},
             {"name":"a_acq_captazione.geom", "alias": "y_proj", "function": "GB_Y"},
             {"name":"a_acq_captazione.codice_ato","alias": "codice_ato"}
         ],
         "table":{
            "name":"a_acq_captazione"
         },
         "join":[
            {
               "type":"inner",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"inner",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "inner",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "a_acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            }
         ],
         "filter": "WHERE a_acq_captazione.d_gestore = 'PUBLIACQUA' AND a_acq_captazione.d_ambito IN ('AT3', NULL) AND a_acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND a_acq_captazione.sub_funzione = 4"
      }
   ]
}