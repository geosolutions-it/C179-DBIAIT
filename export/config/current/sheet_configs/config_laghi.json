{
    "sheet": "Laghi",
    "skip": false,
    "sources": [
        {
            "fields": [
                {"name": "acq_captazione.codice_ato","alias": "codice_ato"},
                {"name": "acq_captazione.denom","alias": "denom"},
                {"name": "acq_captazione.quota","alias": "quota", "function": "FROM_FLOAT_TO_INT"},
                {"name": "acq_auth_capt.bacino","alias": "bacino"},
                {"name": "acq_captazione.corso_acqua","alias": "corso_acqua"},
                {"name": "acq_auth_capt.d_classific","alias": "d_classific"},
                {"name": "acq_capt_conces.estremi_conces","alias": "estremi_conces"},
                {"name": "acq_capt_conces.port_potab","alias": "port_potab"},
                {"name": "acq_captazione.anno_costr","alias": "anno_costr"},
                {"name": "acq_captazione.anno_ristr","alias": "anno_ristr"},
                {"name": "acq_captazione.d_stato_cons","alias": "d_stato_cons"},
                {"name": "acq_auth_capt.d_utilizzo","alias": "d_utilizzo"},
                {"name": "acq_auth_capt.utilizzo_annuo","alias": "utilizzo_annuo"},
                {"name": "acq_auth_capt.area_bac_affer","alias": "area_bac_affer"},
                {"name": "acq_captazione.volume_medio_prel","alias": "volume_medio_prel"},
                {"name": "acq_capt_conces.port_uti_max","alias": "port_uti_max"},
                {"name": "acq_capt_conces.port_uti_min","alias": "port_uti_min"},
                {"name": "acq_capt_conces.port_deriv","alias": "port_deriv"},
                {"name": "acq_captazione.volume_invaso","alias": "volume_invaso"},
                {"name": "acq_captazione.altezza_diga","alias": "altezza_diga"},
                {"name": "acq_auth_capt.sn_inv_norm_coll","alias": "sn_inv_norm_coll", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.d_telecont","alias": "d_telecont"},
                {"name": "acq_auth_capt.sn_strum_mis_port","alias": "sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.d_tipo_cloraz","alias": "d_tipo_cloraz"},
                {"name": "acq_captazione.cod_comune", "alias":"cod_comune"},
                {"name": "acq_auth_capt.anno_instal_clor","alias": "anno_instal_clor"},
                {"name": "acq_auth_capt.anno_ristr_clor","alias": "anno_ristr_clor"},
                {"name": "acq_captazione.d_stato","alias": "d_stato"},
                {"name": "acq_auth_capt.a_area_bac_affer","alias": "a_area_bac_affer"},
                {"name": "acq_captazione.a_anno_costr","alias": "a_anno_costr"},
                {"name": "acq_captazione.a_anno_ristr","alias": "a_anno_ristr"},
                {"name": "acq_captazione.a_volume","alias": "a_volume"},
                {"name": "acq_capt_conces.a_port_es","alias": "a_port_es"},
                {"name": "acq_capt_conces.a_port_uti_max","alias": "a_port_uti_max"},
                {"name": "acq_capt_conces.a_port_uti_min","alias": "a_port_uti_min"},
                {"name": "acq_capt_conces.a_port_deriv","alias": "a_port_deriv"},
				{"name": "acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_captazione.data_agg","alias": "data_agg"},
                {"name": "acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
                {"name": "acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
                {"name": "acq_captazione.codice_ato", "alias": "cod_opera_inpotab_not_exist", "function": "IS_NULL"},
                {"name": "localita.denominazi", "alias": "denominazi" },
                {"name": "acq_auth_capt.sn_tut_ass","alias": "sn_tut_ass", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.sn_rispetto","alias": "sn_rispetto", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.sn_protezione","alias": "sn_protezione", "function": "TO_BIT", "cast": "INTEGER"},
                { "name": "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di.denom_sist_idr", "alias": "denom_sist_idr"}
            ],
            "table": {
                "name": "acq_captazione"
            },
            "join": [
                {
                    "type": "left",
                    "table": {
                        "name": "acq_auth_capt"
                    },
                    "on": [
                        "acq_captazione.idgis",
                        "acq_auth_capt.id_captazione"
                    ],
                    "cond": "="
                },
                {
                    "type": "left",
                    "table": {
                        "name": "acq_capt_conces"
                    },
                    "on": [
                        "acq_captazione.idgis",
                        "acq_capt_conces.id_captazione"
                    ],
                    "cond": "="
                },
                {
                    "type": "left",
                    "table": {
                        "name": "localita"
                    },
                    "on": [
                        "localita.geom",
                        "acq_captazione.geom"
                    ],
                    "cond": "ST_INTERSECTS"
                },
                {
                    "type": "left",
                    "table": {
                        "name": "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di"
                    },
                    "on": [
                        "acq_captazione.id_sist_idr",
                        "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di.idgis_sist_idr"
                    ],
                    "cond": "="
                }
            ],
            "filter": "WHERE acq_captazione.d_gestore = 'PUBLIACQUA' AND acq_captazione.d_ambito IN ('AT3', NULL) AND acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND SUB_FUNZIONE=1"
        },
        {
            "fields": [
                {"name": "a_acq_captazione.codice_ato","alias": "codice_ato"},
                {"name": "a_acq_captazione.denom","alias": "denom"},
                {"name": "a_acq_captazione.quota","alias": "quota", "function": "FROM_FLOAT_TO_INT"},
                {"name": "acq_auth_capt.bacino","alias": "bacino"},
                {"name": "a_acq_captazione.corso_acqua","alias": "corso_acqua"},
                {"name": "acq_auth_capt.d_classific","alias": "d_classific"},
                {"name": "a_acq_capt_conces.estremi_conces","alias": "estremi_conces"},
                {"name": "a_acq_capt_conces.port_potab","alias": "port_potab"},
                {"name": "a_acq_captazione.anno_costr","alias": "anno_costr"},
                {"name": "a_acq_captazione.anno_ristr","alias": "anno_ristr"},
                {"name": "a_acq_captazione.d_stato_cons","alias": "d_stato_cons"},
                {"name": "acq_auth_capt.d_utilizzo","alias": "d_utilizzo"},
                {"name": "acq_auth_capt.utilizzo_annuo","alias": "utilizzo_annuo"},
                {"name": "acq_auth_capt.area_bac_affer","alias": "area_bac_affer"},
                {"name": "a_acq_captazione.volume_medio_prel","alias": "volume_medio_prel"},
                {"name": "a_acq_capt_conces.port_uti_max","alias": "port_uti_max"},
                {"name": "a_acq_capt_conces.port_uti_min","alias": "port_uti_min"},
                {"name": "a_acq_capt_conces.port_deriv","alias": "port_deriv"},
                {"name": "a_acq_captazione.volume_invaso","alias": "volume_invaso"},
                {"name": "a_acq_captazione.altezza_diga","alias": "altezza_diga"},
                {"name": "acq_auth_capt.sn_inv_norm_coll","alias": "sn_inv_norm_coll", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.d_telecont","alias": "d_telecont"},
                {"name": "acq_auth_capt.sn_strum_mis_port","alias": "sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.d_tipo_cloraz","alias": "d_tipo_cloraz"},
                {"name": "a_acq_captazione.cod_comune", "alias":"cod_comune"},
                {"name": "acq_auth_capt.anno_instal_clor","alias": "anno_instal_clor"},
                {"name": "acq_auth_capt.anno_ristr_clor","alias": "anno_ristr_clor"},
                {"name": "a_acq_captazione.d_stato","alias": "d_stato"},
                {"name": "acq_auth_capt.a_area_bac_affer","alias": "a_area_bac_affer"},
                {"name": "a_acq_captazione.a_anno_costr","alias": "a_anno_costr"},
                {"name": "a_acq_captazione.a_anno_ristr","alias": "a_anno_ristr"},
                {"name": "a_acq_captazione.a_volume","alias": "a_volume"},
                {"name": "a_acq_capt_conces.a_port_es","alias": "a_port_es"},
                {"name": "a_acq_capt_conces.a_port_uti_max","alias": "a_port_uti_max"},
                {"name": "a_acq_capt_conces.a_port_uti_min","alias": "a_port_uti_min"},
                {"name": "a_acq_capt_conces.a_port_deriv","alias": "a_port_deriv"},
				{"name": "a_acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "a_acq_captazione.data_agg","alias": "data_agg"},
                {"name":"a_acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
                {"name":"a_acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
                {"name":"a_acq_captazione.codice_ato", "alias": "cod_opera_inpotab_not_exist", "function": "IS_NULL"},
                { "name": "localita.denominazi", "alias": "denominazi" },
                {"name": "acq_auth_capt.sn_tut_ass","alias": "sn_tut_ass", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.sn_rispetto","alias": "sn_rispetto", "function": "TO_BIT", "cast": "INTEGER"},
                {"name": "acq_auth_capt.sn_protezione","alias": "sn_protezione", "function": "TO_BIT", "cast": "INTEGER"},
                { "name": "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "rel_sasupport_sistema_idrico_rel_sa_localita_captazione_di.denom_sist_idr", "alias": "denom_sist_idr"}
            ],
            "table": {
                "name": "a_acq_captazione"
            },
            "join": [
                {
                    "type": "left",
                    "table": {
                        "name": "acq_auth_capt"
                    },
                    "on": [
                        "a_acq_captazione.idgis",
                        "acq_auth_capt.id_captazione"
                    ],
                    "cond": "="
                },
                {
                    "type": "left",
                    "table": {
                        "name": "a_acq_capt_conces"
                    },
                    "on": [
                        "a_acq_captazione.idgis",
                        "a_acq_capt_conces.id_captazione"
                    ],
                    "cond": "="
                },
                {
                    "type": "left",
                    "table": {
                        "name": "localita"
                    },
                    "on": [
                        "localita.geom",
                        "a_acq_captazione.geom"
                    ],
                    "cond": "ST_INTERSECTS"
                },
                {
                    "type": "left",
                    "table": {
                        "name": "support_sistema_idrico_rel_sa_localita"
                    },
                    "on": [
                        "a_acq_captazione.id_sist_idr",
                        "support_sistema_idrico_rel_sa_localita.idgis_sist_idr"
                    ],
                    "cond": "="
                }
            ],
            "filter": "WHERE a_acq_captazione.d_gestore = 'PUBLIACQUA' AND a_acq_captazione.d_ambito IN ('AT3', NULL) AND a_acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND SUB_FUNZIONE=1"
        }
    ],
    "columns": [
        {"id": "8400","transformation": { "func": "CONST", "params": {"value": "3003"}}},

        {"id": "11400","transformation": { "func": "DIRECT", "params": { "field": "sn_tut_ass"}}},
        {"id": "11500","transformation": { "func": "DIRECT", "params": { "field": "sn_rispetto"}}},
        {"id": "11600","transformation": { "func": "DIRECT", "params": { "field": "sn_protezione"}}},

        {"id": "8700","transformation": {"func": "LSTRIP", "params": {"field": "cod_comune", "char": "0"}}},
        {"id": "8700","transformation": {"func": "DECODE_COM", "params": { "field": "cod_comune" }}},

        {"id": "8600","transformation": { "func": "DIRECT", "params": { "field": "denominazi" }}},
        {"id": "8000","transformation": { "func": "DIRECT", "params": { "field": "codice_ato" }}},
        {"id": "8100","transformation": { "func": "DIRECT", "params": { "field": "denom" }}},
        {"id": "8200","transformation": { "func": "ROUND", "params": {"field": "transformed_y_geom", "ndigits":  3}}},
        {"id": "8300","transformation": { "func": "ROUND", "params": {"field": "transformed_x_geom", "ndigits":  3}}},
        {"id": "8500","transformation": { "func": "DIRECT", "params": { "field": "quota" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "8500",
                        "cond": [{
                            "and": [
                              {"operator": "!=", "value": 0 }
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|il valore 0 non e' ammissibile"
                }
            ]},
        {"id": "8800","transformation": { "func": "DIRECT", "params": { "field": "bacino" }}},
        {"id": "8900","transformation": { "func": "DIRECT", "params": { "field": "corso_acqua" }}},
        {"id": "9100","transformation": { "func": "DIRECT", "params": { "field": "estremi_conces" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "9100",
                        "cond": [{
                            "and": [
                              {"operator": "!=", "value": null }
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|non puo' essere vuoto"
                }
            ]
        },
        {"id": "9200","transformation": { "func": "DIRECT", "params": { "field": "port_potab" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "9200",
                        "cond": [{
                            "and": [
                              {"operator": ">=", "value": "{10500}" }
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|dovrebbe essere >= al valore del campo 10500"
                }
            ]},
        {"id": "9700","transformation": { "func": "DIRECT", "params": { "field": "anno_costr" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "9700",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator": "=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9999)"
                }
            ]},
        {"id": "9800","transformation": { "func": "DIRECT", "params": { "field": "anno_ristr" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "9800",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator": "=", "value": 9800}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9800)"
                }
            ]},
        {"id": "10100","transformation": { "func": "DIRECT", "params": { "field": "utilizzo_annuo" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10100",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": "=", "value": 0},
                              {"operator": "=", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10300}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10300 = 0 =>  il campo deve assumere valore 0"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10100",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": ">", "value": 0},
                              {"operator": "<", "value": 100}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10300}","operator": "<=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10300 > 0 =>  il campo deve assumere valore < 100"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10100",
                        "cond": [{
                            "and": [
                              {"lookup": "{10000}","operator": "=", "value": "continuo"},
                              {"operator": "=", "value": 100}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10000}","operator": "!=", "value": "continuo"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 10000 = 'continuo', allora il campo assume valore 100"
                }
            ]},
        {"id": "10200","transformation": { "func": "DIRECT", "params": { "field": "area_bac_affer" }}},
        {"id": "10300","transformation": { "func": "DIRECT", "params": { "field": "volume_medio_prel" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10300",
                        "cond": [{
                            "and": [
                              {"lookup": "{12000}","operator": "=", "value": 1},
                              {"operator": ">", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{12000}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 12000 = 1, allora il campo deve essere > 0"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10300",
                        "cond": [{
                            "and": [
                              {"lookup": "{9200}","operator": "=", "value": 0},
                              {"operator": "<=", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{9200}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 9200 è = 0, il valore non puo' essere > 0"
                }
            ]},
        {"id": "10600","transformation": { "func": "DIRECT", "params": { "field": "port_uti_max" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10600",
                        "cond": [{
                            "and": [
                              {"lookup": "{10500}","operator": "=", "value": 0},
                              {"operator": "=", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10500}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10500 = 0, allora il campo assume valore 0"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10600",
                        "cond": [{
                            "and": [
                              {"lookup": "{10500}","operator": ">", "value": 0},
                              {"operator": ">", "value": "{10500}"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10500}","operator": "<=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10500 > 0, dovrebbe essere > del valore del campo ID 10500"
                }
            ]},
        {"id": "10700","transformation": { "func": "DIRECT", "params": { "field": "port_uti_min" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10700",
                        "cond": [{
                            "and": [
                              {"lookup": "{10500}","operator": "=", "value": 0},
                              {"operator": "=", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10500}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10500 = 0, allora il campo assume valore 0"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10700",
                        "cond": [{
                            "and": [
                              {"lookup": "{10500}","operator": ">", "value": 0},
                              {"operator": "<", "value": "{10500}"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10500}","operator": "<=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10500 > 0, dovrebbe essere < del valore del campo ID 10500"
                }
            ]},
        {"id": "10800","transformation": { "func": "DIRECT", "params": { "field": "port_deriv" }}},
        {"id": "10900","transformation": { "func": "DIRECT", "params": { "field": "volume_invaso" }}},
        {"id": "11000","transformation": { "func": "DIRECT", "params": { "field": "altezza_diga" }}},
        {"id": "11100","transformation": { "func": "DIRECT", "params": { "field": "sn_inv_norm_coll" }}},
        {"id": "11300","transformation": { "func": "DIRECT", "params": { "field": "sn_strum_mis_port" }}},
        {"id": "10400","transformation": { "func": "DIRECT", "params": { "field": "denominazi" }}},
		{"id": "111200","transformation": { "func": "DIRECT", "params": { "field": "sn_uso_plurimo"}}},

        {"id": "111000","transformation": { "func": "DIRECT", "params": { "field": "cod_sist_idr"}}},
        {"id": "111100","transformation": { "func": "DIRECT", "params": { "field": "denom_sist_idr"}}},

        {"id": "11800","transformation": { "func": "DIRECT", "params": { "field": "anno_instal_clor" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "11800",
                        "cond": [{
                            "and": [
                              {"lookup": "{11700}","operator": "=", "value": 1},
                              {"operator": "=", "value": 9800}
                            ]
                        },{
                            "and": [
                              {"lookup": "{11700}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 11700 = 1, allora deve assumere valore 9800"
                },{
                    "func": "IF",
                    "params": {
                        "field": "11800",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator": "=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9999)"
                }
            ]},
        {"id": "11900","transformation": { "func": "DIRECT", "params": { "field": "anno_ristr_clor" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "11900",
                        "cond": [{
                            "and": [
                              {"lookup": "{11700}","operator": "=", "value": 1},
                              {"operator": "=", "value": 9800}
                            ]
                        },{
                            "and": [
                              {"lookup": "{11700}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 11700 = 1, allora deve assumere valore 9800"
                },{
                    "func": "IF",
                    "params": {
                        "field": "11900",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator": "=", "value": 9800}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9800)"
                }
            ]},
        {"id": "13000","transformation": { "func": "DIRECT", "params": { "field": "data_agg" }}},

        {"id": "10500","transformation": { "func": "EXPR", "params": { "field": "volume_medio_prel" ,"expr": "_value_*1000/365/3600/24"}},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10500",
                        "cond": [{
                            "and": [
                              {"operator": "<=", "value": "{9200}"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|dovrebbe essere <= al valore del campo ID 9200"
                }
            ]},

        {"id": "9000","transformation": { "func": "DOMAIN", "params": { "field": "d_classific", "domain_name": "D_CLASSIF_OPERA" }}},
        {"id": "9900","transformation": { "func": "DOMAIN", "params": { "field": "d_stato_cons", "domain_name": "D_STATO_CONS" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "9900",
                        "cond": [{
                            "and": [
                              {"lookup": "{9800}","operator": ">=", "value": 2014},
                              {"operator": ">=", "value": 3}
                            ]
                        },{
                          "and": [
                              {"lookup": "{9800}","operator": "<", "value": 2014}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 9800 >= 2014, allora il campo dovrebbe assumere valore >= 3 (sufficiente)"
                }
            ]},
        {"id": "10000","transformation": { "func": "DOMAIN", "params": { "field": "d_utilizzo", "domain_name": "D_UTILIZZO_OPERA" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "10000",
                        "cond": [{
                            "and": [
                              {"lookup": "{10100}","operator": "=", "value": 100},
                              {"operator": "=", "value": "continuo"}
                            ]
                        },{
                          "and": [
                              {"lookup": "{10100}","operator": "!=", "value": 100}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10100 = 100, allora deve essere = 'continuo'"
                },{
                    "func": "IF",
                    "params": {
                        "field": "10000",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": "=", "value": 0},
                              {"lookup": "{12000}","operator": "=", "value": 1},
                              {"operator": "=", "value": "occasionale"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10300}","operator": "!=", "value": 0},
                              {"lookup": "{12000}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10300 = 0 e il campo ID 12000 = 1, allora deve essere = \"occasionale\""
                }
            ]},
        {"id": "11200","transformation": { "func": "DOMAIN", "params": { "field": "d_telecont", "domain_name": "D_TELECONT" }}},
        {"id": "11700","transformation": { "func": "DOMAIN", "params": { "field": "d_tipo_cloraz", "domain_name": "D_T_CLORAZ" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "11700",
                        "cond": [{
                            "and": [
                              {"lookup": "{11800}","operator": "!=", "value": 9800},
                              {"operator": "!=", "value": 1}
                            ]
                        },{
                            "and": [
                              {"lookup": "{11800}","operator": "=", "value": 9800}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 11800 <> 9800, allora non è ammesso il valore 1"
                }
            ]},
        {"id": "12000","transformation": { "func": "DOMAIN", "params": { "field": "d_stato", "domain_name": "D_STATO" }}},
        {"id": "12100","transformation": { "func": "DOMAIN", "params": { "field": "a_area_bac_affer", "domain_name":  "D_AFFIDABILITA" }}},
        {"id": "12200","transformation": { "func": "DOMAIN", "params": { "field": "a_anno_costr", "domain_name":  "D_AFFIDABILITA" }}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12200",
                        "cond": [{
                            "and": [
                              {"lookup": "{9700}", "operator": "=", "value": 9999},
                              {"operator": "=", "value": "X"}
                            ]
                        }, {
                            "and": [
                              {"lookup": "{9700}", "operator": "!=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 9700 = 9999, allora il campo deve assumere valore X"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12200",
                        "cond": [{
                            "and": [
                              {"lookup": "{9700}","operator": ">=", "value": 2002},
                              {"lookup": "{9700}","operator": "!=", "value": 9999},
                              {"operator": "=", "value": "a"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{9700}","operator": "<", "value": 2002},
                              {"lookup": "{9700}","operator": "=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 9700 è >= 2002 e <> 9999, allora il campo deve assumere valore A"
                }
            ]},
        {"id": "12300","transformation": { "func": "DOMAIN", "params": { "field": "a_anno_ristr", "domain_name":  "D_AFFIDABILITA" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12300",
                        "cond": [{
                            "and": [
                              {"lookup": "{9800}","operator": ">=", "value": 2002},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{9800}","operator": "<", "value": 2002}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 9800 >= 2002 allora il campo deve assumere valore A"
                }
            ]},
        {"id": "12400","transformation": { "func": "DOMAIN", "params": { "field": "a_volume", "domain_name":  "D_AFFIDABILITA" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12400",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": "=", "value": 0},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10300}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10300 = 0, allora deve assumere valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12400",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 1},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10300}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10300 > 0 e il campo ID 11300 = 1, allora il campo dovrebbe assumere il valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12400",
                        "cond": [{
                            "and": [
                              {"lookup": "{10300}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 0},
                              {"operator": "=", "value": "C"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10300}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 10300 > 0 e il campo ID 11300 = 0, allora il campo dovrebbe assumere il valore C"
                }
            ]},
        {"id": "12600","transformation": { "func": "DOMAIN", "params": { "field": "a_port_es", "domain_name":  "D_AFFIDABILITA" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12600",
                        "cond": [{
                            "and": [
                              {"operator": "=", "value": "{12400}"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|deve essere uguale al valore del campo ID 12400"
                }
            ]},
        {"id": "12700","transformation": { "func": "DOMAIN", "params": { "field": "a_port_uti_max", "domain_name":  "D_AFFIDABILITA" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12700",
                        "cond": [{
                            "and": [
                              {"lookup": "{10600}","operator": "=", "value": 0},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10600}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10600 = 0, allora deve assumere valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12700",
                        "cond": [{
                            "and": [
                              {"lookup": "{10600}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 1},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10600}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10600 > 0 e il campo ID 11300 = 1, allora il campo dovrebbe assumere il valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12700",
                        "cond": [{
                            "and": [
                              {"lookup": "{10600}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 0},
                              {"operator": "=", "value": "C"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10600}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 10600 > 0 e il campo ID 11300 = 0, allora il campo dovrebbe assumere il valore C"
                }
            ]},
        {"id": "12800","transformation": { "func": "DOMAIN", "params": { "field": "a_port_uti_min", "domain_name":  "D_AFFIDABILITA" }},"validations": [{
                    "func": "IF",
                    "params": {
                        "field": "12800",
                        "cond": [{
                            "and": [
                              {"lookup": "{10700}","operator": "=", "value": 0},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "and": [
                              {"lookup": "{10700}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 10700 = 0, allora deve assumere valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12800",
                        "cond": [{
                            "and": [
                              {"lookup": "{10700}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 1},
                              {"operator": "=", "value": "A"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10700}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 1}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 10700 > 0 e il campo ID 11300 = 1, allora il campo dovrebbe assumere il valore A"
                },{
                    "func": "IF",
                    "params": {
                        "field": "12800",
                        "cond": [{
                            "and": [
                              {"lookup": "{10700}","operator": ">", "value": 0},
                              {"lookup": "{11300}","operator": "=", "value": 0},
                              {"operator": "=", "value": "C"}
                            ]
                        },{
                            "or": [
                              {"lookup": "{10700}","operator": "<=", "value": 0},
                              {"lookup": "{11300}","operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 10700 > 0 e il campo ID 11300 = 0, allora il campo dovrebbe assumere il valore C"
                }
            ]},
        {"id": "12900","transformation": { "func": "DOMAIN", "params": { "field": "a_port_deriv", "domain_name":  "D_AFFIDABILITA" }}},

        {"id":"12500", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume", "domain_name": "D_AFFIDABILITA"}}},

        {"id":"10400", "transformation":{
             "func": "IF",
             "params": {
                 "field": "cod_opera_inpotab_not_exist",
                 "cond": {
                         "operator": "=",
                         "value": 1,
                         "result": "{ volume_medio_prel }",
                         "else": 0
                     }
                 }
             }
         }
    ]
}
