{
   "sheet":"Sorgenti",
   "skip":false,
   "sources":[
      {
         "fields":[
            {"name":"acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"acq_captazione.denom", "alias":"denom"},
            {"name":"acq_captazione.quota", "alias":"quota"},
            {"name":"acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"acq_capt_conces.port_potab", "alias":"port_potab"},
            {"name":"acq_capt_conces.port_industr", "alias":"port_industr"},
            {"name":"acq_capt_conces.port_irrig", "alias":"port_irrig"},
            {"name":"acq_capt_conces.port_idroel", "alias":"port_idroel"},
            {"name":"acq_auth_capt.port_altro", "alias":"port_altro"},
            {"name":"acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"acq_auth_capt.sn_cunic_presa", "alias":"sn_cunic_presa"},
            {"name":"acq_auth_capt.sn_vasca_capt", "alias":"sn_vasca_capt"},
            {"name":"acq_auth_capt.sn_vasca_mis", "alias":"sn_vasca_mis"},
            {"name":"acq_auth_capt.sn_vasca_car", "alias":"sn_vasca_car"},
            {"name":"acq_captazione.volume_medio_prel", "alias":"volume_medio_prel"},
            {"name":"acq_capt_conces.port_uti_max", "alias":"port_uti_max"},
            {"name":"acq_capt_conces.port_uti_min", "alias":"port_uti_min"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq"},
            {"name":"acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
            {"name":"acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            { "name": "localita.denominazi", "alias": "denominazi" }
         ],
         "table":{
            "name":"acq_captazione"
         },
         "join":[
            {
               "type":"inner",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"inner",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "inner",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            }
         ],
         "filter": "WHERE acq_captazione.d_gestore = 'PUBLIACQUA' AND acq_captazione.d_ambito IN ('AT3', NULL) AND acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND acq_captazione.sub_funzione = 4"
      },
      {
         "fields":[
            {"name":"a_acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"a_acq_captazione.denom", "alias":"denom"},
            {"name":"a_acq_captazione.quota", "alias":"quota"},
            {"name":"acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"acq_capt_conces.port_potab", "alias":"port_potab"},
            {"name":"acq_capt_conces.port_industr", "alias":"port_industr"},
            {"name":"acq_capt_conces.port_irrig", "alias":"port_irrig"},
            {"name":"acq_capt_conces.port_idroel", "alias":"port_idroel"},
            {"name":"acq_auth_capt.port_altro", "alias":"port_altro"},
            {"name":"a_acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"a_acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"a_acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"acq_auth_capt.sn_cunic_presa", "alias":"sn_cunic_presa"},
            {"name":"acq_auth_capt.sn_vasca_capt", "alias":"sn_vasca_capt"},
            {"name":"acq_auth_capt.sn_vasca_mis", "alias":"sn_vasca_mis"},
            {"name":"acq_auth_capt.sn_vasca_car", "alias":"sn_vasca_car"},
            {"name":"a_acq_captazione.volume_medio_prel", "alias":"volume_medio_prel"},
            {"name":"acq_capt_conces.port_uti_max", "alias":"port_uti_max"},
            {"name":"acq_capt_conces.port_uti_min", "alias":"port_uti_min"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq"},
            {"name":"a_acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"a_acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"a_acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"a_acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
            {"name":"a_acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"a_acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            { "name": "localita.denominazi", "alias": "denominazi" }
         ],
         "table":{
            "name":"a_acq_captazione"
         },
         "join":[
            {
               "type":"inner",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"inner",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "inner",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "a_acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            }
         ],
         "filter": "WHERE a_acq_captazione.d_gestore = 'PUBLIACQUA' AND a_acq_captazione.d_ambito IN ('AT3', NULL) AND a_acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND a_acq_captazione.sub_funzione = 4"
      },
        {
            "fields": [
                {
                    "name": "sorgenti_inpotab.ids_codice_potab",
                    "alias": "ids_codice_potab"
                }
            ],
            "table": {
                "name": "sorgenti_inpotab"
            }
        }
   ],
   "columns":[
      {"id":"26200", "transformation":{"func":"EXPR", "params":{"field":"volume_medio_prel", "expr": "_value_*1000/365/3600/24"}}},

      {"id":"23700", "transformation":{"func":"DIRECT", "params":{"field":"codice_ato"}}},
      {"id":"26100", "transformation":{"func":"DIRECT", "params":{"field":"ids_codice_potab"}}},
      {"id":"23800", "transformation":{"func":"DIRECT", "params":{"field":"denom"}}},
      {"id":"24200", "transformation":{"func":"DIRECT", "params":{"field":"quota"}}},
      {"id":"24300", "transformation":{"func":"DIRECT", "params":{"field":"denominazi"}}},
      {"id":"24500", "transformation":{"func":"DIRECT", "params":{"field":"estremi_conces"}}},
      {"id":"24600", "transformation":{"func":"DIRECT", "params":{"field":"port_potab"}}},
      {"id":"24700", "transformation":{"func":"DIRECT", "params":{"field":"port_industr"}}},
      {"id":"24800", "transformation":{"func":"DIRECT", "params":{"field":"port_irrig"}}},
      {"id":"24900", "transformation":{"func":"DIRECT", "params":{"field":"port_idroel"}}},
      {"id":"25000", "transformation":{"func":"DIRECT", "params":{"field":"port_altro"}}},
      {"id":"25100", "transformation":{"func":"DIRECT", "params":{"field":"anno_costr"}}},
      {"id":"25200", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr"}}},
      {"id":"25500", "transformation":{"func":"DIRECT", "params":{"field":"utilizzo_annuo"}}},
      {"id":"25600", "transformation":{"func":"DIRECT", "params":{"field":"sn_cunic_presa"}}},
      {"id":"25700", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_capt"}}},
      {"id":"25800", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_mis"}}},
      {"id":"25900", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_car"}}},
      {"id":"26000", "transformation":{"func":"DIRECT", "params":{"field":"volume_medio_prel"}}},
      {"id":"26300", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_max"}}},
      {"id":"26400", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_min"}}},
      {"id":"26600", "transformation":{"func":"DIRECT", "params":{"field":"sn_strum_mis_port"}}},
      {"id":"27100", "transformation":{"func":"DIRECT", "params":{"field":"anno_instal_clor"}}},
      {"id":"27200", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr_clor"}}},
      {"id":"27300", "transformation":{"func":"DIRECT", "params":{"field":"sn_epis_inq"}}},
      {"id":"28200", "transformation":{"func":"DIRECT", "params":{"field":"data_agg"}}},

      {"id":"23900", "transformation":{"func":"DIRECT", "params":{"field":"transformed_y_geom"}}},
      {"id":"24000", "transformation":{"func":"DIRECT", "params":{"field":"transformed_x_geom"}}},

      {"id":"25300", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato_cons", "domain_name": "D_STATO_CONS"}}},
      {"id":"25400", "transformation":{"func":"DOMAIN", "params":{"field":"d_utilizzo", "domain_name": "D_UTILIZZO_OPERA"}}},
      {"id":"26500", "transformation":{"func":"DOMAIN", "params":{"field":"d_telecont", "domain_name": "D_TELECONT"}}},
      {"id":"27000", "transformation":{"func":"DOMAIN", "params":{"field":"d_tipo_cloraz", "domain_name": "D_T_CLORAZ"}}},
      {"id":"27400", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato", "domain_name": "D_STATO"}}},
      {"id":"27500", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_costr", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"27600", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_ristr", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"27700", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"27900", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_es", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"28000", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_max", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"28100", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_min", "domain_name": "D_AFFIDABILITA"}}},

      {"id":"24100", "transformation":{"func":"CONST", "params":{"value":"3003"}}},
      {"id":"26700", "transformation":{"func":"CONST", "params":{"value":"0"}}},
      {"id":"26800", "transformation":{"func":"CONST", "params":{"value":"1"}}},
      {"id":"26900", "transformation":{"func":"CONST", "params":{"value":"0"}}},

      {"id":"24400", "transformation":{"func":"LSTRIP", "params":{"field":"cod_comune", "char": "0"}}}
   ]
}