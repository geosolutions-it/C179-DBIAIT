{
   "sheet":"Sorgenti",
   "skip":false,
   "sources":[
      {
         "fields":[
            {"name":"acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"acq_captazione.denom", "alias":"denom"},
            {"name":"acq_captazione.quota", "alias":"quota", "function": "FROM_FLOAT_TO_INT"},
            {"name":"acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"acq_capt_conces.port_potab", "alias":"port_potab"},
            {"name":"acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"acq_auth_capt.sn_cunic_presa", "alias":"sn_cunic_presa", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_capt", "alias":"sn_vasca_capt", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_mis", "alias":"sn_vasca_mis", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_car", "alias":"sn_vasca_car", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_captazione.volume_medio_prel", "alias":"volume_medio_prel"},
            {"name":"acq_capt_conces.port_uti_max", "alias":"port_uti_max"},
            {"name":"acq_capt_conces.port_uti_min", "alias":"port_uti_min"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
			{"name": "acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            {"name":"acq_captazione.codice_ato", "alias": "cod_opera_inpotab_not_exist", "function": "IS_NULL"},
            { "name": "localita.denominazi", "alias": "denominazi" },
            { "name": "support_codice_capt_accorp.codice_accorp_capt", "alias": "codice_accorp_capt"},
            {"name": "support_codice_capt_accorp.denom","alias": "denom_accorp"},
                { "name": "support_sistema_idrico_rel_sa_localita.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "support_sistema_idrico_rel_sa_localita.denom_sist_idr", "alias": "denom_sist_idr"}
         ],
         "table":{
            "name":"acq_captazione"
         },
         "join":[
            {
               "type":"left",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_codice_capt_accorp"
                 },
                 "on": [
                   "acq_captazione.idgis",
                   "support_codice_capt_accorp.idgis"
                 ],
                 "cond": "="
            },
           {
                "type": "left",
                "table": {
                    "name": "support_sistema_idrico_rel_sa_localita"
                },
                "on": [
                    "acq_captazione.id_sist_idr",
                    "support_sistema_idrico_rel_sa_localita.idgis_sist_idr"
                ],
                "cond": "="
            }
         ],
         "filter": "WHERE acq_captazione.d_gestore = 'PUBLIACQUA' AND acq_captazione.d_ambito IN ('AT3', NULL) AND acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND acq_captazione.sub_funzione = 4"
      },
      {
         "fields":[
            {"name":"a_acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"a_acq_captazione.denom", "alias":"denom"},
            {"name":"a_acq_captazione.quota", "alias":"quota", "function": "FROM_FLOAT_TO_INT"},
            {"name":"a_acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"a_acq_capt_conces.port_potab", "alias":"port_potab"},
            {"name":"a_acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"a_acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"a_acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"acq_auth_capt.sn_cunic_presa", "alias":"sn_cunic_presa", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_capt", "alias":"sn_vasca_capt", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_mis", "alias":"sn_vasca_mis", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.sn_vasca_car", "alias":"sn_vasca_car", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"a_acq_captazione.volume_medio_prel", "alias":"volume_medio_prel"},
            {"name":"a_acq_capt_conces.port_uti_max", "alias":"port_uti_max"},
            {"name":"a_acq_capt_conces.port_uti_min", "alias":"port_uti_min"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"a_acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"a_acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"a_acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"a_acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"a_acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"a_acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"a_acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
			{"name":"a_acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"a_acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"a_acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            {"name":"a_acq_captazione.codice_ato", "alias": "cod_opera_inpotab_not_exist", "function": "IS_NULL"},
            { "name": "localita.denominazi", "alias": "denominazi" },
            { "name": "support_codice_capt_accorp.codice_accorp_capt", "alias": "codice_accorp_capt"},
            {"name": "support_codice_capt_accorp.denom","alias": "denom_accorp"},
                { "name": "support_sistema_idrico_rel_sa_localita.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "support_sistema_idrico_rel_sa_localita.denom_sist_idr", "alias": "denom_sist_idr"}
         ],
         "table":{
            "name":"a_acq_captazione"
         },
         "join":[
            {
               "type":"left",
               "table":{
                  "name":"a_acq_capt_conces"
               },
               "on":[
                  "a_acq_capt_conces.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "a_acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_codice_capt_accorp"
                 },
                 "on": [
                   "a_acq_captazione.idgis",
                   "support_codice_capt_accorp.idgis"
                 ],
                 "cond": "="
            },
           {
                "type": "left",
                "table": {
                    "name": "support_sistema_idrico_rel_sa_localita"
                },
                "on": [
                    "a_acq_captazione.id_sist_idr",
                    "support_sistema_idrico_rel_sa_localita.idgis_sist_idr"
                ],
                "cond": "="
            }
         ],
         "filter": "WHERE a_acq_captazione.d_gestore = 'PUBLIACQUA' AND a_acq_captazione.d_ambito IN ('AT3', NULL) AND a_acq_captazione.d_stato NOT IN ('IPR', 'IAC') AND a_acq_captazione.sub_funzione = 4"
      }
   ],
   "columns":[


      {"id": "111800","transformation": { "func": "DIRECT", "params": { "field": "codice_accorp_capt"}}},
      {"id": "111900","transformation": { "func": "DIRECT", "params": { "field": "denom_accorp"}}},

        {"id": "112000","transformation": { "func": "DIRECT", "params": { "field": "cod_sist_idr"}}},
        {"id": "112100","transformation": { "func": "DIRECT", "params": { "field": "denom_sist_idr"}}},

      {"id":"26200", "transformation":{"func":"EXPR", "params":{"field":"volume_medio_prel", "expr": "_value_*1000/365/3600/24"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "26200",
                  "cond": [{
                      "and": [
                        {"operator": "<=", "value": "{24600}"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|dovrebbe essere <= al valore del campo ID 24600"
          }
      ]},

      {"id":"23700", "transformation":{"func":"DIRECT", "params":{"field":"codice_ato"}}},

      {"id":"26100", "transformation":{"func":"DIRECT", "params":{"field":"ids_codice_potab"}}},
      {"id":"23800", "transformation":{"func":"DIRECT", "params":{"field":"denom"}}},
      {"id":"24200", "transformation":{"func":"DIRECT", "params":{"field":"quota"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "24200",
                  "cond": [{
                      "and": [
                        {"operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|il valore 0 non e' ammissibile"
          }
      ]},
      {"id":"24300", "transformation":{"func":"DIRECT", "params":{"field":"denominazi"}}},
      {"id":"24500", "transformation":{"func":"DIRECT", "params":{"field":"estremi_conces"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "24500",
                  "cond": [{
                      "and": [
                        {"operator": "!=", "value": null}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|il valore non puo' essere vuoto"
          }
      ]},
      {"id":"24600", "transformation":{"func":"DIRECT", "params":{"field":"port_potab"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "24600",
                  "cond": [{
                      "and": [
                        {"operator": ">=", "value": "{26200}"},
                        {"operator": "!=", "value": null}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|dovrebbe essere >= al valore del campo 26200 e non vuoto"
          }
      ]},
      {"id":"25100", "transformation":{"func":"DIRECT", "params":{"field":"anno_costr"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "25100",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9999)"
          }
      ]},
      {"id":"25200", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "25200",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "=", "value": 9800}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9800)"
          }
      ]},
      {"id":"25500", "transformation":{"func":"DIRECT", "params":{"field":"utilizzo_annuo"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "25500",
                  "cond": [{
                      "and": [
                        {"lookup": "{26000}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26000}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26000 = 0 => il campo deve assumere valore 0"
          },{
              "func": "IF",
              "params": {
                  "field": "25500",
                  "cond": [{
                      "and": [
                        {"lookup": "{26000}","operator": ">", "value": 0},
                        {"operator": "<", "value": 100}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26000}","operator": "<=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26000 > 0 =>  il campo deve assumere valore < 100"
          },{
              "func": "IF",
              "params": {
                  "field": "25500",
                  "cond": [{
                      "and": [
                        {"lookup": "{25400}","operator": "=", "value": "continuo"},
                        {"operator": "=", "value": 100}
                      ]
                  },{
                      "and": [
                        {"lookup": "{25400}","operator": "!=", "value": "continuo"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 25400 = 'continuo', allora il campo assume valore 100"
          }
      ]},
      {"id":"25600", "transformation":{"func":"DIRECT", "params":{"field":"sn_cunic_presa"}}},
      {"id":"25700", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_capt"}}},
      {"id":"25800", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_mis"}}},
      {"id":"25900", "transformation":{"func":"DIRECT", "params":{"field":"sn_vasca_car"}}},
	  {"id":"112200","transformation": { "func": "DIRECT", "params": { "field": "sn_uso_plurimo"}}},																								 
      {"id":"26000", "transformation":{"func":"DIRECT", "params":{"field":"volume_medio_prel"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "26000",
                  "cond": [{
                      "and": [
                        {"lookup": "{27400}","operator": "=", "value": 1},
                        {"operator": ">", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{27400}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 27400 = 1, allora il campo deve essere > 0"
          },{
              "func": "IF",
              "params": {
                  "field": "26000",
                  "cond": [{
                      "and": [
                        {"lookup": "{24600}","operator": "=", "value": 0},
                        {"operator": "<=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{24600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 24600 è = 0, il valore non puo' essere > 0"
          }
      ]},
      {"id":"26300", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_max"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "26300",
                  "cond": [{
                      "and": [
                        {"lookup": "{26200}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26200}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26200 = 0, allora il campo assume valore 0"
          },{
              "func": "IF",
              "params": {
                  "field": "26300",
                  "cond": [{
                      "and": [
                        {"lookup": "{26200}","operator": ">", "value": 0},
                        {"operator": ">", "value": "{26200}"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26200}","operator": "<=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26200 > 0, dovrebbe essere > del valore del campo ID 26200"
          }
      ]},
      {"id":"26400", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_min"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "26400",
                  "cond": [{
                      "and": [
                        {"lookup": "{26200}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26200}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26200 = 0, allora il campo assume valore 0"
          },{
              "func": "IF",
              "params": {
                  "field": "26400",
                  "cond": [{
                      "and": [
                        {"lookup": "{26200}","operator": ">", "value": 0},
                        {"operator": "<", "value": "{26200}"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26200}","operator": "<=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26200 > 0, dovrebbe essere < del valore del campo ID 26200"
          }
      ]},
      {"id":"26600", "transformation":{"func":"DIRECT", "params":{"field":"sn_strum_mis_port"}}},
      {"id":"27100", "transformation":{"func":"DIRECT", "params":{"field":"anno_instal_clor"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "27100",
                  "cond": [{
                      "and": [
                        {"lookup": "{27000}","operator": "=", "value": 1},
                        {"operator": "=", "value": 9800}
                      ]
                  },{
                      "and": [
                        {"lookup": "{27000}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 27000 = 1, allora deve assumere valore 9800"
          },{
              "func": "IF",
              "params": {
                  "field": "27100",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "!=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9999)"
          }
      ]},
      {"id":"27200", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr_clor"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "27200",
                  "cond": [{
                      "and": [
                        {"lookup": "{27000}","operator": "=", "value": 1},
                        {"operator": "=", "value": 9800}
                      ]
                  },{
                      "and": [
                        {"lookup": "{27000}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 27000 = 1, allora deve assumere valore 9800"
          },{
              "func": "IF",
              "params": {
                  "field": "27200",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "!=", "value": 9800}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9800)"
          }
      ]},
      {"id":"27300", "transformation":{"func":"DIRECT", "params":{"field":"sn_epis_inq"}}},
      {"id":"28200", "transformation":{"func":"DIRECT", "params":{"field":"data_agg"}}},

      {"id":"23900", "transformation": { "func": "ROUND", "params": {"field": "transformed_y_geom", "ndigits":  3}}},
      {"id":"24000", "transformation": { "func": "ROUND", "params": {"field": "transformed_x_geom", "ndigits":  3}}},

      {"id":"25300", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato_cons", "domain_name": "D_STATO_CONS"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "25300",
                  "cond": [{
                      "and": [
                        {"lookup": "{25200}","operator": ">=", "value": 2014},
                        {"operator": ">=", "value": 3}
                      ]
                  },{
                      "and": [
                        {"lookup": "{25200}","operator": "<", "value": 2014}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 25200 >= 2014, allora il campo dovrebbe assumere valore >= 3 (sufficiente)"
          }
      ]},
      {"id":"25400", "transformation":{"func":"DOMAIN", "params":{"field":"d_utilizzo", "domain_name": "D_UTILIZZO_OPERA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "25400",
                  "cond": [{
                      "and": [
                        {"lookup": "{25500}","operator": "=", "value": 100},
                        {"operator": "=", "value": "continuo"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{25500}","operator": "!=", "value": 100}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 25500 = 100, allora deve essere ='continuo'"
          },{
            "func": "IF",
            "params": {
                "field": "25400",
                "cond": [{
                    "and": [
                      {"lookup": "{26000}","operator": "=", "value": 0},
                      {"lookup": "{27400}","operator": "=", "value": 1},
                      {"operator": "=", "value": "occasionale"}
                    ]
                },{
                    "or": [
                      {"lookup": "{26000}","operator": "!=", "value": 0},
                      {"lookup": "{27400}","operator": "!=", "value": 1}
                    ]
                }]
            },
            "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26000 = 0 e il campo ID 27400 = 1, allora deve essere = 'occasionale'"
        }
      ]},
      {"id":"26500", "transformation":{"func":"DOMAIN", "params":{"field":"d_telecont", "domain_name": "D_TELECONT"}}},
      {"id":"27000", "transformation":{"func":"DOMAIN", "params":{"field":"d_tipo_cloraz", "domain_name": "D_T_CLORAZ"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "27000",
                  "cond": [{
                      "and": [
                        {"lookup": "{27100}","operator": "!=", "value": 9800},
                        {"operator": "!=", "value": 1}
                      ]
                  },{
                      "and": [
                        {"lookup": "{27100}","operator": "=", "value": 9800}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 27100 <> 9800, allora non è ammesso il valore 1"
          }
      ]},
      {"id":"27400", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato", "domain_name": "D_STATO"}}},
      {"id":"27500", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_costr", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "27500",
                  "cond": [{
                      "and": [
                        {"lookup": "{25100}","operator": "=", "value": 9999},
                        {"operator": "=", "value": "X"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{25100}","operator": "!=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 25100 = 9999, allora il campo deve assumere valore X"
          },{
              "func": "IF",
              "params": {
                  "field": "27500",
                  "cond": [{
                      "and": [
                        {"lookup": "{25100}","operator": ">=", "value": 2002},
                        {"lookup": "{25100}","operator": "!=", "value": 9999},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{25100}","operator": "<", "value": 2002},
                        {"lookup": "{25100}","operator": "=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 25100 è >= 2002 e <> 9999, allora il campo deve assumere valore A"
          }
      ]},
      {"id":"27600", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_ristr", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "27600",
                  "cond": [{
                      "and": [
                        {"lookup": "{25200}","operator": ">=", "value": 2002},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{25200}","operator": "<", "value": 2002}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 25200 >= 2002 allora il campo deve assumere valore A"
          }
      ]},
      {"id":"27700", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "27700",
                  "cond": [{
                      "and": [
                        {"lookup": "{26000}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26000}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26000 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "27700",
                  "cond": [{
                      "and": [
                        {"lookup": "{26000}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26000}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26000 > 0 e il campo ID 26600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "27700",
                  "cond": [{
                      "and": [
                        {"lookup": "{26000}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26000}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 26000 > 0 e il campo ID 26600 = 0, allora il campo dovrebbe assumere il valore C "
          }
      ]},
      {"id":"27900", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_es", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "27900",
                  "cond": [{
                      "and": [
                        {"operator": "=", "value": "{27700}"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|deve essere uguale al valore del campo ID 27700"
          }
      ]},
      {"id":"28000", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_max", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "28000",
                  "cond": [{
                      "and": [
                        {"lookup": "{26300}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26300}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26300 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "28000",
                  "cond": [{
                      "and": [
                        {"lookup": "{26300}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26300}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26300 > 0 e il campo ID 26600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "28000",
                  "cond": [{
                      "and": [
                        {"lookup": "{26300}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26300}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 26300 > 0 e il campo ID 26600 = 0, allora il campo dovrebbe assumere il valore C"
          }
      ]},
      {"id":"28100", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_min", "domain_name": "D_AFFIDABILITA"}},"validations": [{
              "func": "IF",
              "params": {
                  "field": "28100",
                  "cond": [{
                      "and": [
                        {"lookup": "{26400}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{26400}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 26400 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "28100",
                  "cond": [{
                      "and": [
                        {"lookup": "{26400}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26400}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 26400 > 0 e il campo ID 26600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "28100",
                  "cond": [{
                      "and": [
                        {"lookup": "{26400}","operator": ">", "value": 0},
                        {"lookup": "{26600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{26400}","operator": "<=", "value": 0},
                        {"lookup": "{26600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 26400 > 0 e il campo ID 26600 = 0, allora il campo dovrebbe assumere il valore C"
          }
      ]},

      {"id":"24100", "transformation":{"func":"CONST", "params":{"value":"3003"}}},
      {"id":"26700", "transformation":{"func":"CONST", "params":{"value": 0}}},
      {"id":"26800", "transformation":{"func":"CONST", "params":{"value": 1}}},
      {"id":"26900", "transformation":{"func":"CONST", "params":{"value": 0}}},

      {"id":"24400", "transformation":{"func":"LSTRIP", "params":{"field":"cod_comune", "char": "0"}}},
      {"id":"24400", "transformation": {"func":"DECODE_COM", "params": { "field": "cod_comune" }}},

      {"id":"27800", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume", "domain_name": "D_AFFIDABILITA"}}},

      {"id":"26100", "transformation":{
         "func": "IF",
         "params": {
             "field": "cod_opera_inpotab_not_exist",
             "cond": {
                     "operator": "=",
                     "value": 1,
                     "result": "{ volume_medio_prel }",
                     "else": 0
                 }
             }
         }
      }

   ]
}