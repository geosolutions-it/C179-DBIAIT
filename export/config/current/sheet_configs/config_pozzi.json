{
   "sheet":"Pozzi",
   "skip":false,
   "sources":[
      {
         "fields":[
            {"name":"acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"acq_captazione.denom", "alias":"denom"},
            {"name":"acq_captazione.quota", "alias":"quota", "function": "FROM_FLOAT_TO_INT"},
            {"name":"acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"acq_capt_conces.port_potab", "alias":"port_potab", "cast": "NUMERIC(18,2)"},
            {"name":"acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"acq_captazione.prof_pozzo", "alias":"prof_pozzo", "cast": "NUMERIC(18,2)"},
            {"name":"acq_capt_conces.diam_perf", "alias":"diam_perf"},
            {"name":"acq_captazione.volume_medio_prel", "alias":"volume_medio_prel", "cast": "NUMERIC(18,6)"},
            {"name":"acq_capt_conces.port_uti_max", "alias":"port_uti_max", "cast": "NUMERIC(18,2)"},
            {"name":"acq_capt_conces.port_uti_min", "alias":"port_uti_min", "cast": "NUMERIC(18,2)"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.a_volume_imm","alias": "a_volume_imm"},
            {"name": "acq_auth_capt.volume_imm","alias": "volume_imm", "cast": "NUMERIC(18,6)"},
            {"name":"acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
			{"name": "acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            {"name":"stats_pompe.sum_potenza", "alias": "sum_potenza", "cast": "NUMERIC(18,2)"},
            {"name":"stats_pompe.avg_idx_potenza", "alias": "avg_idx_potenza"},
            { "name": "localita.denominazi", "alias": "denominazi" },
            { "name": "acq_auth_capt.consumo_ee", "alias": "consumo_ee", "cast": "NUMERIC(18,3)"},
            {"name": "acq_auth_capt.sn_tut_ass","alias": "sn_tut_ass", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_rispetto","alias": "sn_rispetto", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_protezione","alias": "sn_protezione", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_strum_mis_press","alias": "sn_strum_mis_press", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "support_pozzi_inpotab.volume_medio_prel","alias": "support_vol_med_prel"},
            { "name": "support_codice_capt_accorp.codice_accorp_capt", "alias": "codice_accorp_capt"},
            {"name": "support_codice_capt_accorp.denom","alias": "denom_accorp"},
                { "name": "support_sistema_idrico_rel_sa_localita_captazione.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "support_sistema_idrico_rel_sa_localita_captazione.denom_sist_idr", "alias": "denom_sist_idr"}
         ],
         "table":{
            "name":"acq_captazione"
         },
         "join":[
            {
               "type": "left",
               "table":{
                  "name":"acq_capt_conces"
               },
               "on":[
                  "acq_capt_conces.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"stats_pompe"
               },
               "on":[
                  "stats_pompe.codice_ato",
                  "acq_captazione.codice_ato"
               ],
               "cond":"="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_codice_capt_accorp"
                 },
                 "on": [
                     "support_codice_capt_accorp.idgis",
                     "acq_captazione.idgis"
                 ],
                 "cond": "="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_pozzi_inpotab"
                 },
                 "on": [
                     "support_pozzi_inpotab.ids_codice",
                     "acq_captazione.codice_ato"
                 ],
                 "cond": "="
            },
                {
                    "type": "left",
                    "table": {
                        "name": "support_sistema_idrico_rel_sa_localita_captazione"
                    },
                    "on": [
                        "acq_captazione.codice_ato",
                        "support_sistema_idrico_rel_sa_localita_captazione.codice_ato"
                    ],
                    "cond": "="
                }
         ],
		 "filter": "WHERE acq_captazione.d_gestore = 'PUBLIACQUA' AND (acq_captazione.d_ambito IN ('AT3') or acq_captazione.d_ambito is null) AND acq_captazione.d_stato NOT IN ('IPR','IAC') AND acq_captazione.sub_funzione = 3"
      },
      {
         "fields":[
            {"name":"a_acq_captazione.codice_ato", "alias":"codice_ato"},
            {"name":"a_acq_captazione.denom", "alias":"denom"},
            {"name":"a_acq_captazione.quota", "alias":"quota", "function": "FROM_FLOAT_TO_INT"},
            {"name":"a_acq_capt_conces.estremi_conces", "alias":"estremi_conces"},
            {"name":"a_acq_capt_conces.port_potab", "alias":"port_potab"},
            {"name":"a_acq_captazione.anno_costr", "alias":"anno_costr"},
            {"name":"a_acq_captazione.anno_ristr", "alias":"anno_ristr"},
            {"name":"a_acq_captazione.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"acq_auth_capt.d_utilizzo", "alias":"d_utilizzo"},
            {"name":"acq_auth_capt.utilizzo_annuo", "alias":"utilizzo_annuo"},
            {"name":"a_acq_captazione.prof_pozzo", "alias":"prof_pozzo"},
            {"name":"a_acq_capt_conces.diam_perf", "alias":"diam_perf"},
            {"name":"a_acq_captazione.volume_medio_prel", "alias":"volume_medio_prel"},
            {"name":"a_acq_capt_conces.port_uti_max", "alias":"port_uti_max"},
            {"name":"a_acq_capt_conces.port_uti_min", "alias":"port_uti_min"},
            {"name":"acq_auth_capt.d_telecont", "alias":"d_telecont"},
            {"name":"acq_auth_capt.sn_strum_mis_port", "alias":"sn_strum_mis_port", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"acq_auth_capt.d_tipo_cloraz", "alias":"d_tipo_cloraz"},
            {"name":"acq_auth_capt.anno_instal_clor", "alias":"anno_instal_clor"},
            {"name":"acq_auth_capt.anno_ristr_clor", "alias":"anno_ristr_clor"},
            {"name": "acq_auth_capt.a_volume_imm","alias": "a_volume_imm"},
            {"name": "acq_auth_capt.volume_imm","alias": "volume_imm"},
            {"name":"acq_auth_capt.sn_epis_inq", "alias":"sn_epis_inq", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"a_acq_captazione.d_stato", "alias":"d_stato"},
            {"name":"a_acq_captazione.a_anno_costr", "alias":"a_anno_costr"},
            {"name":"a_acq_captazione.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"a_acq_captazione.a_volume", "alias":"a_volume"},
            {"name":"a_acq_capt_conces.a_port_es", "alias":"a_port_es"},
            {"name":"a_acq_capt_conces.a_port_uti_max", "alias":"a_port_uti_max"},
            {"name":"a_acq_capt_conces.a_port_uti_min", "alias":"a_port_uti_min"},
			{"name":"a_acq_capt_conces.sn_uso_plurimo","alias": "sn_uso_plurimo", "function": "TO_BIT", "cast": "INTEGER"},
            {"name":"a_acq_captazione.data_agg", "alias":"data_agg"},
            {"name":"a_acq_captazione.cod_comune", "alias":"cod_comune"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_x_geom", "function": "GB_X"},
            {"name":"a_acq_captazione.geom", "alias": "transformed_y_geom", "function": "GB_Y"},
            {"name":"stats_pompe.sum_potenza", "alias": "sum_potenza"},
            {"name":"stats_pompe.avg_idx_potenza", "alias": "avg_idx_potenza"},
            { "name": "localita.denominazi", "alias": "denominazi" },
            { "name": "acq_auth_capt.consumo_ee", "alias": "consumo_ee"},
            {"name": "acq_auth_capt.sn_tut_ass","alias": "sn_tut_ass", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_rispetto","alias": "sn_rispetto", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_protezione","alias": "sn_protezione", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "acq_auth_capt.sn_strum_mis_press","alias": "sn_strum_mis_press", "function": "TO_BIT", "cast": "INTEGER"},
            {"name": "support_pozzi_inpotab.volume_medio_prel","alias": "support_vol_med_prel"},
            { "name": "support_codice_capt_accorp.codice_accorp_capt", "alias": "codice_accorp_capt"},
            {"name": "support_codice_capt_accorp.denom","alias": "denom_accorp"},
                { "name": "support_sistema_idrico_rel_sa_localita_captazione.cod_sist_idr", "alias": "cod_sist_idr"},
                { "name": "support_sistema_idrico_rel_sa_localita_captazione.denom_sist_idr", "alias": "denom_sist_idr"}
         ],
         "table":{
            "name":"a_acq_captazione"
         },
         "join":[
            {
               "type":"left",
               "table":{
                  "name":"a_acq_capt_conces"
               },
               "on":[
                  "a_acq_capt_conces.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"acq_auth_capt"
               },
               "on":[
                  "acq_auth_capt.id_captazione",
                  "a_acq_captazione.idgis"
               ],
               "cond":"="
            },
            {
               "type":"left",
               "table":{
                  "name":"stats_pompe"
               },
               "on":[
                  "stats_pompe.codice_ato",
                  "a_acq_captazione.codice_ato"
               ],
               "cond":"="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "localita"
                 },
                 "on": [
                     "localita.geom",
                     "a_acq_captazione.geom"
                 ],
                 "cond": "ST_INTERSECTS"
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_codice_capt_accorp"
                 },
                 "on": [
                     "support_codice_capt_accorp.idgis",
                     "a_acq_captazione.idgis"
                 ],
                 "cond": "="
            },
            {
                 "type": "left",
                 "table": {
                     "name": "support_pozzi_inpotab"
                 },
                 "on": [
                     "support_pozzi_inpotab.ids_codice",
                     "a_acq_captazione.codice_ato"
                 ],
                 "cond": "="
            },
                {
                    "type": "left",
                    "table": {
                        "name": "support_sistema_idrico_rel_sa_localita_captazione"
                    },
                    "on": [
                        "a_acq_captazione.codice_ato",
                        "support_sistema_idrico_rel_sa_localita_captazione.codice_ato"
                    ],
                    "cond": "="
                }
         ],
         "filter": "WHERE a_acq_captazione.d_gestore = 'PUBLIACQUA' AND a_acq_captazione.d_ambito IN ('AT3', NULL) AND a_acq_captazione.sub_funzione = 3 AND a_acq_captazione.d_stato NOT IN ('IPR','IAC')"
      }
   ],
   "columns":[

        {"id": "111300","transformation": { "func": "DIRECT", "params": { "field": "codice_accorp_capt"}}},
        {"id": "111400","transformation": { "func": "DIRECT", "params": { "field": "denom_accorp"}}},

      {"id":"17200", "transformation":{"func":"EXPR", "params":{"field":"volume_medio_prel", "expr": "_value_*1000/365/3600/24"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "17200",
                  "cond": [{
                      "and": [
                        {"lookup": "{15600}","operator": "<=", "value": "{17200}"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Field not lower than ID 15600"
          }
      ]},

        {"id": "111500","transformation": { "func": "DIRECT", "params": { "field": "cod_sist_idr"}}},
        {"id": "111600","transformation": { "func": "DIRECT", "params": { "field": "denom_sist_idr"}}},

      {"id":"14700", "transformation":{"func":"DIRECT", "params":{"field":"codice_ato"}}},
      {"id":"16900", "transformation":{"func":"DIRECT", "params":{"field":"consumo_ee"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "16900",
                        "cond": [{
                            "and": [
                              {"lookup": "{18500}","operator": "=", "value": 1},
                              {"operator": "=", "value": 0}
                            ]
                        },{
                            "and": [
                              {"lookup": "{18500}","operator": "!=", "value": 1},
                              {"operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|value is not 0"
                }
            ]},
      {"id":"15300", "transformation":{"func":"DIRECT", "params":{"field":"denominazi"}}},
      {"id":"14800", "transformation":{"func":"DIRECT", "params":{"field":"denom"}}},
      {"id":"15200", "transformation":{"func":"DIRECT", "params":{"field":"quota"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "15200",
                        "cond": [{
                            "and": [
                              {"operator": "!=", "value": 0}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|value is not 0"
                }
            ]},

      {"id":"15500", "transformation":{"func":"DIRECT", "params":{"field":"estremi_conces"}}, "validations":  [{
        "func": "IF",
              "params": {
                  "field": "15500",
                  "cond": [{
                      "and": [
                        {"operator": "!=", "value": ""}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Non puo' essere vuoto"
      }]},
      {"id":"15600", "transformation":{"func":"DIRECT", "params":{"field":"port_potab"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "15600",
                  "cond": [{
                      "and": [
                        {"operator": ">=", "value": "{17200}"}
                      ]
                  }, {
                      "and": [
                        {"operator": "!=", "value": ""}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Value is lower than the value in field 17200 or empty"
          }
      ]},
      {"id":"16100", "transformation":{"func":"DIRECT", "params":{"field":"anno_costr"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "16100",
                  "cond": [{
                            "and": [
                              {"operator": ">", "value": "{REF_YEAR}"},
                              {"operator":  "=", "value": 9999}
                            ]
                        },{
                            "and": [
                              {"operator": "<", "value": "{REF_YEAR}"},
                              {"operator":  "!=", "value": 9999}
                            ]
                        }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Value is not valid for year {REF_YEAR}"
          }
      ]},
      {"id":"16200", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "16200",
                  "cond": [{
                            "and": [
                              {"operator": ">", "value": "{REF_YEAR}"},
                              {"operator":  "=", "value": 9800}
                            ]
                        },{
                            "and": [
                              {"operator": "<", "value": "{REF_YEAR}"},
                              {"operator":  "!=", "value": 9800}
                            ]
                        }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Value is not valid for year {REF_YEAR}"
          }
      ]},
      {"id":"16500", "transformation":{"func":"DIRECT", "params":{"field":"utilizzo_annuo"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "16500",
                  "cond": [{
                      "and": [
                        {"lookup": "{17000}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17000}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 17000 = 0 =>  il campo deve assumere valore 0"
          },{
              "func": "IF",
              "params": {
                  "field": "16500",
                  "cond": [{
                      "and": [
                        {"lookup": "{17000}","operator": ">", "value": 0},
                        {"operator": "<", "value": 100}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17000}","operator": "<=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 17000 > 0 => il campo deve assumere valore < 100"
          },{
              "func": "IF",
              "params": {
                  "field": "16500",
                  "cond": [{
                      "and": [
                        {"lookup": "{16400}","operator": "=", "value": "continuo"},
                        {"operator": "=", "value": 100}
                      ]
                  },{
                      "and": [
                        {"lookup": "{16400}","operator": "!=", "value": "continuo"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 16400 = 'continuo', allora il campo assume valore 100"
          }
      ]},
      {"id":"16600", "transformation":{"func":"DIRECT", "params":{"field":"prof_pozzo"}}},
      {"id":"16700", "transformation":{"func":"DIRECT", "params":{"field":"diam_perf"}}},
      {"id":"17000", "transformation":{"func":"DIRECT", "params":{"field":"volume_medio_prel"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "17000",
                  "cond": [{
                      "and": [
                        {"lookup": "{18500}","operator": "=", "value": 1},
                        {"operator": ">", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{15600}","operator": "=", "value": 0},
                        {"operator": ">", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{18500}","operator": "!=", "value": 1}
                      ]
                  },{
                      "and": [
                        {"lookup": "{15600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Field is lower than 0"
          }
      ]},
      {"id":"17300", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_max"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "17300",
                  "cond": [{
                      "and": [
                        {"lookup": "{17200}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17200}","operator": ">", "value": 0},
                        {"lookup": "{17200}","operator": "<", "value": "{17300}"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17200}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Field not lower than ID 17200"
          }
      ]},
      {"id":"17400", "transformation":{"func":"DIRECT", "params":{"field":"port_uti_min"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "17400",
                  "cond": [{
                      "and": [
                        {"lookup": "{17200}","operator": "=", "value": 0},
                        {"operator": "=", "value": 0}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17200}","operator": ">", "value": 0},
                        {"lookup": "{17200}","operator": "<", "value": "{17400}"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{17200}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Field not lower than ID 17200"
          }
      ]},
      {"id":"17600", "transformation":{"func":"DIRECT", "params":{"field":"sn_strum_mis_port"}}},
      {"id":"18200", "transformation":{"func":"DIRECT", "params":{"field":"anno_instal_clor"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18200",
                  "cond": [{
                      "and": [
                        {"lookup": "{18100}","operator": "=", "value": 1},
                        {"operator": "=", "value": 9800}
                      ]
                  },{
                      "and": [
                        {"lookup": "{18100}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 18100 = 1, allora deve assumere valore 9800"
          },{
              "func": "IF",
              "params": {
                  "field": "18200",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9999)"
          }
      ]},
      {"id":"18300", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr_clor"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18300",
                  "cond": [{
                      "and": [
                        {"lookup": "{18100}","operator": "=", "value": 1},
                        {"operator": "=", "value": 9800}
                      ]
                  },{
                      "and": [
                        {"lookup": "{18100}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 18100 = 1, allora deve assumere valore 9800"
          },{
              "func": "IF",
              "params": {
                  "field": "18300",
                  "cond": [{
                      "or": [
                        {"operator": "<=", "value": "{REF_YEAR}"},
                        {"operator": "=", "value": 9800}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: non puo' essere successivo all'anno di competenza netsic (eccetto per il valore 9800)"
          }
      ]},
      {"id":"18400", "transformation":{"func":"DIRECT", "params":{"field":"sn_epis_inq"}}},
      {"id":"19400", "transformation":{"func":"DIRECT", "params":{"field":"data_agg"}}},

      {"id":"14900", "transformation": { "func": "ROUND", "params": {"field": "transformed_y_geom", "ndigits":  3}}},
      {"id":"15000", "transformation": { "func": "ROUND", "params": {"field": "transformed_x_geom", "ndigits":  3}}},

      {"id":"16300", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato_cons", "domain_name": "D_STATO_CONS"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "16300",
                  "cond": [{
                          "and": [
                              {"lookup": "{16200}", "operator": ">=", "value": 2014},
                              {"operator": ">=", "value": 3}
                            ]
                        }, {
                            "and": [
                              {"lookup": "{16200}", "operator": "<", "value": 2014}
                            ]
                        }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Value is lower than 3"
          }
      ]},
      {"id":"16400", "transformation":{"func":"DOMAIN", "params":{"field":"d_utilizzo", "domain_name": "D_UTILIZZO_OPERA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "16400",
                  "cond": [{
                      "and": [
                        {"lookup": "{16500}","operator": "=", "value": 100},
                        {"operator": "=", "value": "continuo"}
                      ]
                  },{
                      "and": [
                        {"lookup": "{16500}","operator": "!=", "value": 100}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 16500 = 100, allora deve essere ='continuo'"
          },{
              "func": "IF",
              "params": {
                  "field": "16400",
                  "cond": [{
                      "and": [
                        {"lookup": "{17000}","operator": "=", "value": 0},
                        {"lookup": "{18500}","operator": "=", "value": 1},
                        {"operator": "=", "value": "occasionale"}
                      ]
                  },{
                      "or": [
                        {"lookup": "{17000}","operator": "!=", "value": 0},
                        {"lookup": "{18500}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 17000 = 0 e il campo ID 18500 = 1, allora deve essere = 'occasionale'"
          }
      ]},
      {"id":"17500", "transformation":{"func":"DOMAIN", "params":{"field":"d_telecont", "domain_name": "D_TELECONT"}}},
      {"id":"18100", "transformation":{"func":"DOMAIN", "params":{"field":"d_tipo_cloraz", "domain_name": "D_T_CLORAZ"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18100",
                  "cond": [
                {
                    "or": [
                        {
                            "lookup": "{18200}",
                            "operator": "=",
                            "value": 9800
                        },
                        {
                            "operator": "=",
                            "value": 1
                        }
                    ]
                }, {
                    "and": [
                        {
                            "lookup": "{18200}",
                            "operator": "!=",
                            "value": 9800
                        },
                        {
                            "operator": "!=",
                            "value": 1
                        }
                    ]
                }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Value 1 is not permitted"
          }
      ]},
      {"id":"18500", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato", "domain_name": "D_STATO"}}},
      {"id":"18600", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_costr", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18600",
                  "cond": [{
                      "and": [
                        {"lookup": "{16100}", "operator": "=", "value": 9999},
                        {"operator": "=", "value": "X"}
                      ]},{
                      "and": [
                          {"lookup": "{16100}" , "operator": "!=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 16100 = 9999, allora il campo deve assumere valore X"
          },{
              "func": "IF",
              "params": {
                  "field": "18600",
                  "cond": [{
                      "and": [
                        {"lookup": "{16100}", "operator": ">=", "value": 2002},
                        {"lookup": "{16100}", "operator": "!=", "value": 9999},
                        {"operator": "=", "value": "A"}
                      ]},{
                      "or": [
                          {"lookup": "{16100}" , "operator": "<", "value": 2002},
                          {"lookup": "{16100}" , "operator": "=", "value": 9999}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 16100 è >= 2002 e <> 9999, allora il campo deve assumere valore A"
          }
      ]},
      {"id":"18700", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_ristr", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18700",
                  "cond": [{
                      "and": [
                        {"lookup":"{16200}","operator": ">=", "value": 2002},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup":"{16200}","operator": "<", "value": 2002}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|se il campo ID 16200 >= 2002 allora il campo deve assumere valore A"
          }
      ]},
      {"id":"18900", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "18900",
                  "cond": [{
                      "and": [
                        {"lookup":"{17000}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup":"{17000}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 17000 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "18900",
                  "cond": [{
                      "and": [
                        {"lookup":"{17000}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17000}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 17000 > 0 e il campo ID 17600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "18900",
                  "cond": [{
                      "and": [
                        {"lookup":"{17000}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17000}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 17000 > 0 e il campo ID 17600 = 0, allora il campo dovrebbe assumere il valore C"
          }
      ]},
      {"id":"19100", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_es", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "19100",
                  "cond": [{
                      "and": [
                        {"operator": "=", "value": "{18900}"}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|deve essere uguale al valore del campo ID 18900"
          }
      ]},
      {"id":"19200", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_max", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "19200",
                  "cond": [{
                      "and": [
                        {"lookup":"{17300}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup":"{17300}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 17300 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "19200",
                  "cond": [{
                      "and": [
                        {"lookup":"{17300}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17300}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 17300 > 0 e il campo ID 17600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "19200",
                  "cond": [{
                      "and": [
                        {"lookup":"{17300}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17300}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 17300 > 0 e il campo ID 17600 = 0, allora il campo dovrebbe assumere il valore C"
          }
      ]},
      {"id":"19300", "transformation":{"func":"DOMAIN", "params":{"field":"a_port_uti_min", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
              "func": "IF",
              "params": {
                  "field": "19300",
                  "cond": [{
                      "and": [
                        {"lookup":"{17400}","operator": "=", "value": 0},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "and": [
                        {"lookup":"{17400}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 1: se il campo ID 17400 = 0, allora deve assumere valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "19300",
                  "cond": [{
                      "and": [
                        {"lookup":"{17400}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 1},
                        {"operator": "=", "value": "A"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17400}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 1}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 2: se il campo ID 17400 > 0 e il campo ID 17600 = 1, allora il campo dovrebbe assumere il valore A"
          },{
              "func": "IF",
              "params": {
                  "field": "19300",
                  "cond": [{
                      "and": [
                        {"lookup":"{17400}","operator": ">", "value": 0},
                        {"lookup":"{17600}","operator": "=", "value": 0},
                        {"operator": "=", "value": "C"}
                      ]
                  },{
                      "or": [
                        {"lookup":"{17400}","operator": "<=", "value": 0},
                        {"lookup":"{17600}","operator": "!=", "value": 0}
                      ]
                  }]
              },
              "warning": "Foglio: {SHEET}|Riga: {ROW}|Codice_ato: {CODICE_ATO}|Campo: {FIELD}|Condizione 3: se il campo ID 17400 > 0 e il campo ID 17600 = 0, allora il campo dovrebbe assumere il valore C"
          }
      ]},

      {"id":"15100", "transformation":{"func":"CONST", "params":{"value":"3003"}}},

      {"id": "17700","transformation": { "func": "DIRECT", "params": { "field": "sn_strum_mis_press"}}},
      {"id": "17800","transformation": { "func": "DIRECT", "params": { "field": "sn_tut_ass"}}},
      {"id": "17900","transformation": { "func": "DIRECT", "params": { "field": "sn_rispetto"}}},
      {"id": "18000","transformation": { "func": "DIRECT", "params": { "field": "sn_protezione"}}},
	  {"id": "111700","transformation": { "func": "DIRECT", "params": { "field": "sn_uso_plurimo"}}},																								  

      {"id":"16800", "transformation":{
         "func": "IF",
         "params": {
             "field": "sum_potenza",
             "cond": {
                     "operator": "=",
                     "value": null,
                     "result": 0,
                     "else": "{ sum_potenza }"
                 }
             }
         }
      },
      {"id":"18800", "transformation":{
         "func": "IF",
         "params": {
             "field": "avg_idx_potenza",
             "cond": {
                     "operator": "=",
                     "value": null,
                     "result": "X",
                     "else": "{ avg_idx_potenza }"
                 }
             }
         }
      },
      {"id":"19000", "transformation":{"func":"DOMAIN", "params":{"field":"a_volume_imm", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"15400", "transformation":{"func":"LSTRIP", "params":{"field":"cod_comune", "char": "0"}}},
      {"id":"15400", "transformation":{"func":"DECODE_COM", "params": { "field": "cod_comune" }}},
        {"id": "17100","transformation": { "func": "DIRECT", "params": { "field": "volume_imm"}}}

   ]
}
