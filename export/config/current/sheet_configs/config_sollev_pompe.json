{
   "sheet":"Sollev_pompe",
   "skip":false,
   "sources":[
      {
         "fields":[
            {"name":"archivio_pompe.codice_ato", "alias":"codice_ato"},
            {"name":"archivio_pompe.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"archivio_pompe.anno_instal", "alias":"anno_instal"},
            {"name":"archivio_pompe.anno_ristr", "alias":"anno_ristr"},
            {"name":"archivio_pompe.potenza", "alias":"potenza"},
            {"name":"archivio_pompe.portata", "alias":"portata"},
            {"name":"archivio_pompe.prevalenza", "alias":"prevalenza"},
            {"name":"archivio_pompe.sn_riserva", "alias":"sn_riserva", "function": "TO_BIT"},
            {"name":"archivio_pompe.a_anno_instal", "alias":"a_anno_instal"},
            {"name":"archivio_pompe.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"archivio_pompe.a_potenza", "alias":"a_potenza"},
            {"name":"archivio_pompe.a_portata", "alias":"a_portata"},
            {"name":"archivio_pompe.a_prevalenza", "alias":"a_prevalenza"}
         ],
         "table":{
            "name":"archivio_pompe"
         },
         "filter": "WHERE archivio_pompe.tipo_oggetto = 'FGN_IMP_SOLLEV'"
      }
   ],
   "columns":[
      {"id":"66300", "transformation":{"func":"DIRECT", "params":{"field":"codice_ato"}}},
      {"id":"66500", "transformation":{"func":"DIRECT", "params":{"field":"d_stato_cons"}}},
      {"id":"66600", "transformation":{"func":"DIRECT", "params":{"field":"anno_instal"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "66600",
                        "cond": [{
                            "or": [
                              {"operator": ">=", "value": "{REF_YEAR}"},
                              {"operator":  "!=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Campo: {FIELD}: Field greater than ref_year"
                }
            ]},
      {"id":"66700", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "66700",
                        "cond": [{
                            "or": [
                              {"operator": ">=", "value": "{REF_YEAR}"},
                              {"operator":  "!=", "value": 9800}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Campo: {FIELD}: Field greater than ref_year"
                }
            ]},
      {"id":"66800", "transformation":{"func":"DIRECT", "params":{"field":"potenza"}}},
      {"id":"66900", "transformation":{"func":"DIRECT", "params":{"field":"portata"}}},
      {"id":"67000", "transformation":{"func":"DIRECT", "params":{"field":"prevalenza"}}},
      {"id":"67100", "transformation":{"func":"DIRECT", "params":{"field":"sn_riserva"}}},
      {"id":"67200", "transformation":{"func":"DIRECT", "params":{"field":"a_anno_instal"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "67200",
                        "cond": [{
                            "and": [
                              {"lookup": "{66600}","operator": "=", "value": 9999},
                              {"operator": "=", "value": "X"}
                            ],
                            "or": [
                              {"lookup": "{66600}","operator": ">=", "value": 2002},
                              {"lookup": "{66600}","operator": "!=", "value": 9999},
                              {"operator": "=", "value": "A"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Campo: {FIELD}: Field is not X or A"
                }
            ]},
        {"id":"67300", "transformation":{"func":"DIRECT", "params":{"field":"a_anno_ristr"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "67300",
                        "cond": [{
                            "and": [
                              {"lookup": "{66700}","operator": ">=", "value": 2002},
                              {"operator":  "=", "value": "A"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Campo: {FIELD}: Field is not A"
                }
            ]},
      {"id":"67400", "transformation":{"func":"DIRECT", "params":{"field":"a_potenza"}}},
      {"id":"67500", "transformation":{"func":"DIRECT", "params":{"field":"a_portata"}}},
      {"id":"67600", "transformation":{"func":"DIRECT", "params":{"field":"a_prevalenza"}}}
   ]
}