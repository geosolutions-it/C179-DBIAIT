{
   "sheet":"Pozzi_pompe",
   "skip":false,
   "sources":[
      {
         "fields":[
            {"name":"archivio_pompe.codice_ato", "alias":"codice_ato"},
            {"name":"archivio_pompe.d_stato_cons", "alias":"d_stato_cons"},
            {"name":"archivio_pompe.anno_instal", "alias":"anno_instal"},
            {"name":"archivio_pompe.anno_ristr", "alias":"anno_ristr"},
            {"name":"archivio_pompe.potenza", "alias":"potenza"},
            {"name":"archivio_pompe.portata", "alias":"portata"},
            {"name":"archivio_pompe.prevalenza", "alias":"prevalenza"},
            {"name":"archivio_pompe.sn_riserva", "alias":"sn_riserva", "function": "TO_BIT"},
            {"name":"archivio_pompe.a_anno_instal", "alias":"a_anno_instal"},
            {"name":"archivio_pompe.a_anno_ristr", "alias":"a_anno_ristr"},
            {"name":"archivio_pompe.a_potenza", "alias":"a_potenza"},
            {"name":"archivio_pompe.a_portata", "alias":"a_portata"},
            {"name":"archivio_pompe.a_prevalenza", "alias":"a_prevalenza"}
         ],
         "table":{
            "name":"archivio_pompe"
         },
         "filter": "WHERE archivio_pompe.tipo_oggetto = 'ACQ_CAPTAZIONE'"
      }
   ],
   "columns":[
      {"id":"19700", "transformation":{"func":"DIRECT", "params":{"field":"codice_ato"}}},
      {"id":"19900", "transformation":{"func":"DOMAIN", "params":{"field":"d_stato_cons", "domain_name": "D_STATO_CONS"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "19900",
                        "cond": [{
                            "and": [
                              {"lookup": "{20100}","operator": ">=", "value": 2014},
                              {"operator": ">=", "value": 3}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Codice_ato: {CODICE_ATO}, Campo: {FIELD}: Field is lower than 3"
                }
            ]},
      {"id":"20000", "transformation":{"func":"DIRECT", "params":{"field":"anno_instal"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "20000",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator":  "=", "value": 9999}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Codice_ato: {CODICE_ATO}, Campo: {FIELD}: Field greater than {REF_YEAR}"
                }
            ]},
      {"id":"20100", "transformation":{"func":"DIRECT", "params":{"field":"anno_ristr"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "20100",
                        "cond": [{
                            "or": [
                              {"operator": "<=", "value": "{REF_YEAR}"},
                              {"operator":  "=", "value": 9800}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Codice_ato: {CODICE_ATO}, Campo: {FIELD}: Field greater than {REF_YEAR}"
                }
            ]},
      {"id":"20200", "transformation":{"func":"DIRECT", "params":{"field":"potenza"}}},
      {"id":"20300", "transformation":{"func":"DIRECT", "params":{"field":"portata"}}},
      {"id":"20400", "transformation":{"func":"DIRECT", "params":{"field":"prevalenza"}}},
      {"id":"20500", "transformation":{"func":"DIRECT", "params":{"field":"sn_riserva"}}},
      {"id":"20600", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_instal", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "20600",
                        "cond": [{
                            "and": [
                              {"lookup": "{20000}","operator": "=", "value": 9999},
                              {"operator": "=", "value": "X"}
                            ],
                            "or": [
                              {"lookup": "{20000}","operator": ">=", "value": 2002},
                              {"lookup": "{20000}","operator": "!=", "value": 9999},
                              {"operator": "=", "value": "A"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Codice_ato: {CODICE_ATO}, Campo: {FIELD}: Field is not X or A"
                }
            ]},
      {"id":"20700", "transformation":{"func":"DOMAIN", "params":{"field":"a_anno_ristr", "domain_name": "D_AFFIDABILITA"}}, "validations": [{
                    "func": "IF",
                    "params": {
                        "field": "20700",
                        "cond": [{
                            "and": [
                              {"lookup": "{20100}","operator": ">=", "value": 2002},
                              {"operator":  "=", "value": "A"}
                            ]
                        }]
                    },
                    "warning": "Foglio: {SHEET}, Riga:{ROW}, Codice_ato: {CODICE_ATO}, Campo: {FIELD}: Field is not A"
                }
            ]},
      {"id":"20800", "transformation":{"func":"DOMAIN", "params":{"field":"a_potenza", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"20900", "transformation":{"func":"DOMAIN", "params":{"field":"a_portata", "domain_name": "D_AFFIDABILITA"}}},
      {"id":"21000", "transformation":{"func":"DOMAIN", "params":{"field":"a_prevalenza", "domain_name": "D_AFFIDABILITA"}}}
   ]
}